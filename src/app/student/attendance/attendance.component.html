<div class="container">
  <div class="row">
    <!--Start Left Panel-->
    <div class="col-lg-3 profile-info">
        <app-sidenavigation></app-sidenavigation>
    </div>
    <!--End Left Panel-->

    <!--Start Right Panel-->
    <div class="col-lg-9 kyc-colm user-management">
      <div class="kyc-section rewards-section reports-sectn">
        <div>
          <h3 class="heading"><a (click)="showChart()" style="cursor: pointer;">Attendance</a><span class="nav-item dropdown float-right" style="text-decoration: none;">
                  <button class="leaveButton" (click)="showLeaves()" data-toggle="tooltip" title="Leave application status" (click)="displayLeaveRecord()"><i class="fa fa-clock-o " aria-hidden="true" ></i></button>
                  <button class="leaveButton" data-toggle="modal" data-target="#leaveModal"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>
            </span></h3>
          <hr/>
          <div class="row">
          <div class="chart-features col-lg-12" id="main">
            <canvas id="barChart"></canvas>
          </div>



          <div id = "leaveinfo" class="col-lg-12" style="display: none;">
              <div style="margin-bottom: 10px">
                <h5 class="modal-title" id="exampleModalLabel">Leave Account</h5>
              </div>
              <div>
                <table class="table table-bordered "  id="myTable">
                  <thead>
                    <tr style="background-color:rgb(166, 168, 177); font-weight : bold;">
                    <td>Type of Leave</td>
                              <td>From</td>
                              <td>To</td>
                              <td>Reason</td>
                    <td>Status</td>
                            </tr>
                  </thead>

                          <tbody>
                            <tr class="table-success">
                    <td>Medical</td>
                              <td>01-05-2108</td>
                              <td>10-05-2018</td>
                              <td>Jaundice</td>
                    <td>Approved</td>
                            </tr>

                   <tr class="table-success">
                    <td>Medical</td>
                              <td>11-06-2108</td>
                              <td>13-06-2018</td>
                              <td>Viral Fever</td>
                    <td>Approved</td>
                            </tr>

                   <tr class="table-success">
                              <td>Sports</td>
                              <td>31-08-2108</td>
                              <td>5-09-2018</td>
                              <td>Volleyball Nationals from College</td>
                    <td>Approved</td>
                            </tr>

                   <tr class="table-warning">
                              <td>Medical</td>
                              <td>28-09-2108</td>
                              <td>01-10-2018</td>
                              <td>Viral Fever</td>
                    <td>Waiting</td>
                            </tr>
                    <tr class="table-danger">
                                <td>Medical</td>
                                <td>28-09-2108</td>
                                <td>01-10-2018</td>
                                <td>Viral Fever</td>
                      <td>rejected</td>
                              </tr>
                    </tbody>
                        </table>
              </div>



          </div>


            <div id="leaveDetails" class="sidenavbar">
                <div>
                    <h5 id="exampleModalLabel">{{currentSubject}}</h5>
                 </div>
                <div class="tableentry">
                      <mat-table [dataSource]='dataSource' >
                          <ng-container matColumnDef="Date">
                              <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
                              <mat-cell *matCellDef="let value"> {{value.classDate| date: 'dd-MM-yyyy'}} </mat-cell>
                            </ng-container>

                            <ng-container matColumnDef="Time">
                                <mat-header-cell *matHeaderCellDef> Time </mat-header-cell>
                                <mat-cell *matCellDef="let value"> {{value.from | slice:0:5}} - {{value.to | slice:0:5}} </mat-cell>
                              </ng-container>

                              <ng-container matColumnDef="Status">
                                  <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
                                  <mat-cell *matCellDef="let value"> <span *ngIf="value.attendance-value.lectureCount===0">Present</span>
                                  <span *ngIf="value.attendance-value.lectureCount!==0"> Absent </span> </mat-cell>
                                </ng-container>

                                <mat-header-row *matHeaderRowDef='displayedColumns; sticky: true'></mat-header-row>
                                <mat-row mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                         <!-- <thead>
                            <tr>
                              <td>Date</td>
                              <td>Time</td>
                              <td>Status</td>
                            </tr>
                          </thead>

                          <tbody>
                            <tr *ngFor="let value of subjectAttendance">
                              <td>{{value.classDate| date: 'dd-MM-yyyy'}}</td>
                              <td>{{value.from}} - {{value.to}}</td>
                              <td *ngIf="value.attendance-value.lectureCount===0">Present</td>
                              <td *ngIf="value.attendance-value.lectureCount!==0">Absent</td>
                            </tr>
                          </tbody>-->
                        </mat-table>

                      </div>
                      <mat-paginator [pageSize]="10" showFirstLastButtons></mat-paginator>
            </div>

          </div>

        </div>


      </div>

    </div>

    <!--End Right Panel-->
  </div>
</div>

  <!-- Use any element to open the sidenav -->


<div class="modal fade" id="leaveModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="heading">Apply for Leave</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeBtn>
                  <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body">
              <form class="row">
                <div class="col-lg-12 subheads form-group">
                  <label class="control-label" for="Type of leave">Leave Type</label>

                  <select class="form-control col-lg-12 subheads" [(ngModel)]="form.subject" name="first">
                    <option *ngFor="let opt of options">
                       {{opt.name}}
                    </option>
                 </select>
                </div>

                <div class="col-lg-12" style="margin-top: 20px;">
                  <div class="row">
                    <div class="col-lg-6 subheads">
                      <label for="From">From </label><br/>
                      <input type="date" name="From" [(ngModel)]="form.from">
                    </div>
                    <div class="col-lg-5 subheads">
                      <label for="To">To </label><br/>
                      <input type="date" name="To" [(ngModel)]="form.to">
                    </div>
                  </div>
                </div>
                <div class="form-group col-lg-12 subheads" style="margin-top: 20px;">
                  <label for="reason">Reason*</label>
                  <textarea class="form-control" rows="5" id="reason"  name="reason" [(ngModel)]="form.details"></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="reset" class="btn btn-primary">Reset</button>
              <button type="submit" class="btn btn-primary" (click)="onSubmit()">Submit</button>
            </div>
      </div>
    </div>
  </div>

